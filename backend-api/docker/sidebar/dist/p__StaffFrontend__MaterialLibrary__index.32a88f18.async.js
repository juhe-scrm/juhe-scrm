(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1kEw":function(s,v,e){s.exports=e.p+"static/file-icon-pdf.2e8a3821.svg"},"33zU":function(s,v,e){s.exports=e.p+"static/file-icon-video.b2250657.svg"},CmVi:function(s,v,e){s.exports=e.p+"static/file-icon-link.9aa3411d.svg"},IJTP:function(s,v,e){"use strict";e.r(v);var _=e("miYZ"),A=e("tsqr"),o=e("tJVT"),l=e("q1tI"),a=e.n(l),C=e("nhC9"),V=e("LKIn"),k=e("Ti4W"),z=e.n(k),y=e("9og8"),G=e("WmNS"),p=e.n(G),U=e("sy1d"),F=e("RICU");function H(c){return u.apply(this,arguments)}function u(){return u=Object(y.a)(p.a.mark(function c(n){return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(U.a)("".concat(F.c,"/material/lib"),{method:"GET",params:n}));case 1:case"end":return r.stop()}},c)})),u.apply(this,arguments)}function O(c){return L.apply(this,arguments)}function L(){return L=Object(y.a)(p.a.mark(function c(n){return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(U.a)("".concat(F.c,"/material/lib/tags"),{method:"GET",params:n}));case 1:case"end":return r.stop()}},c)})),L.apply(this,arguments)}var i=e("XCrF"),I=e("1GRj"),ie=e("qVdP"),T=e("jsC+"),J=e("y8nQ"),j=e("Vl3Y"),se=e("+L6B"),W=e("2/Rp"),oe=e("R9oj"),Q=e("ECub"),fe=e("DYRE"),X=e("zeV3"),Xe=e("+BJd"),ve=e("mr32"),ge=e("leS6");function ye(c){if(Array.isArray(c))return Object(ge.a)(c)}function Ee(c){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(c))return Array.from(c)}var pe=e("Qw5x");function Oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(c){return ye(c)||Ee(c)||Object(pe.a)(c)||Oe()}var Ye=e("5NDa"),ce=e("5rEg"),Ce=e("zsUx"),g=e.n(Ce),Te=e("1kEw"),be=e.n(Te),Pe=e("qX41"),Me=e.n(Pe),Se=e("vXzg"),Le=e.n(Se),je=e("dGsC"),De=e.n(je),Be=e("CmVi"),Ie=e.n(Be),Ae=e("r11K"),te=e.n(Ae),Re=e("33zU"),Ne=e.n(Re),Ke=e("R+Pm"),Ue=e("8ub7"),ue=e("4i/N"),We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},xe=We,_e=e("6VBw"),de=function(n,m){return l.createElement(_e.a,Object.assign({},n,{ref:m,icon:xe}))};de.displayName="ClearOutlined";var ze=l.forwardRef(de),Ge=e("9BLJ"),He=e("ShgS"),me=e("c+yx"),Ve=e("N+uz"),Fe=Object(Ke.a)({scriptUrl:He.a.iconfontUrl}),Je=function(n){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"icon-";if(typeof n=="string"&&n!==""){if(Object(me.e)(n)||Object(me.d)(n))return a.a.createElement(Ue.a,{component:function(){return a.a.createElement("img",{src:n,alt:"icon",className:"ant-pro-sider-menu-icon"})}});if(n.startsWith(m))return a.a.createElement(Fe,{type:n})}return n},ne=function(n){return n.material_type==="pdf"?be.a:n.material_type==="ppt"?Me.a:n.material_type==="excel"?De.a:n.material_type==="word"?Le.a:n.material_type==="poster"?n.url:n.material_type==="video"?Ne.a:Ie.a},$e=function(){var c=Object(y.a)(p.a.mark(function n(m){var r,f,D,R;return p.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(r="",f=m.material_type||"",["poster"].includes(f)&&(f="image"),["link","poster"].includes(f)&&(f="news"),["pdf","excel","ppt","word"].includes(f)&&(f="file"),!["image","file","video"].includes(f)){h.next=16;break}return D=A.default.loading("\u7D20\u6750\u51C6\u5907\u4E2D"),h.next=9,Object(Ve.c)(f,m.url);case 9:if(R=h.sent,D(),R.code===0){h.next=15;break}return console.log(R.message),A.default.error("\u6D88\u606F\u7D20\u6750\u4E0A\u4F20\u5931\u8D25"),h.abrupt("return");case 15:r=R.data.media_id;case 16:window.wx.invoke("sendChatMessage",{msgtype:f,enterChat:!0,image:{mediaid:r},video:{mediaid:r},file:{mediaid:r},news:{link:m.link,title:m.title,desc:m.digest,imgUrl:m.url}},function(N){N.err_msg!=="sendChatMessage:ok"&&(console.log("result",N),console.log("replyDetail",m),A.default.error(N.err_msg))});case 17:case"end":return h.stop()}},n)}));return function(m){return c.apply(this,arguments)}}(),we=function(n){var m=n.setKeyword,r=n.loading,f=n.items,D=n.allTags,R=Object(l.useState)(!1),b=Object(o.a)(R,2),h=b[0],N=b[1],q=Object(l.useState)(""),Y=Object(o.a)(q,2),P=Y[0],re=Y[1],ee=Object(l.useState)([]),Z=Object(o.a)(ee,2),$=Z[0],le=Z[1],ae=Object(l.useState)([]),B=Object(o.a)(ae,2),M=B[0],w=B[1];return Object(l.useEffect)(function(){le(D.filter(function(t){return t.name.includes(P)}))},[P,D]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:g.a.searchBar},a.a.createElement(ce.a.Search,{placeholder:"\u8F93\u5165\u5173\u952E\u8BCD",loading:r,style:{marginRight:12},allowClear:!0,onSearch:function(E){m(E)}}),a.a.createElement(T.a,{visible:h,overlay:a.a.createElement("div",{className:g.a.overlay},a.a.createElement("div",{style:{padding:"0 8px"}},a.a.createElement("div",{className:g.a.overlayTitle},"\u7D20\u6750\u6807\u7B7E ( ",D.length," )"),a.a.createElement(j.a,{layout:"horizontal"},a.a.createElement(ce.a,{allowClear:!0,placeholder:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22\u6807\u7B7E",value:P,onChange:function(E){re(E.currentTarget.value)}}),a.a.createElement("div",{style:{padding:"12px 0"}},$==null?void 0:$.map(function(t){var E,d=(E=M.map(function(S){return S.id}))===null||E===void 0?void 0:E.includes(t==null?void 0:t.id);return a.a.createElement(X.b,null,a.a.createElement(ve.a,{style:{cursor:"pointer"},className:"tag-item ".concat(d?" selected-tag-item":""),key:t.id,onClick:function(){t!=null&&t.id&&d?w(M.filter(function(K){return K.id!==(t==null?void 0:t.id)})):w([].concat(he(M),[t]))}},t.name,d&&a.a.createElement(ue.a,{style:{marginLeft:6,fontSize:11}})))})),(D==null?void 0:D.length)===0&&a.a.createElement(Q.a,{style:{marginTop:36,marginBottom:36}}),a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},a.a.createElement(W.a,{onClick:function(){return N(!1)}},"\u53D6\u6D88"),a.a.createElement(W.a,{style:{marginLeft:6},type:"primary",htmlType:"submit",onClick:function(){N(!1),n.setSelectedTags&&n.setSelectedTags(M||[])}},"\u5B8C\u6210"))))),trigger:["click"]},a.a.createElement("div",null,a.a.createElement(W.a,{onClick:function(){N(!h)}},"\u7B5B\u9009")))),M.length>0&&a.a.createElement("div",{className:g.a.filterBar},a.a.createElement("div",{className:g.a.tagList},M==null?void 0:M.map(function(t){return a.a.createElement("span",{key:t.id,className:g.a.tag,style:{cursor:"pointer"},onClick:function(){w(M.filter(function(d){return d.id!==t.id}))}},t.name,a.a.createElement(ue.a,{style:{marginLeft:6,fontSize:11}}))})),M.length>0&&a.a.createElement(W.a,{onClick:function(){return w([])},icon:a.a.createElement(ze,null),type:"link"},"\u6E05\u7A7A\u7B5B\u9009")),a.a.createElement("div",null,f.length===0&&a.a.createElement(Q.a,{image:Q.a.PRESENTED_IMAGE_SIMPLE}),f.length>0&&a.a.createElement(X.b,{direction:"vertical",className:g.a.materialList},f.map(function(t){var E;return a.a.createElement(X.b,{direction:"horizontal",className:g.a.materialItem,key:t.id},a.a.createElement(X.b,null,a.a.createElement("span",{className:g.a.sendButtonWrap},a.a.createElement(W.a,{onClick:Object(y.a)(p.a.mark(function d(){return p.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,$e(t);case 2:case"end":return K.stop()}},d)})),type:"link",className:g.a.sendButton,icon:Je("icon-fasong")}))),a.a.createElement(X.b,{className:g.a.materialPreview},a.a.createElement("div",{className:g.a.leftPart},t.material_type==="poster"&&a.a.createElement(I.a,{src:ne(t),fallback:te.a,preview:t.material_type==="poster"?{mask:a.a.createElement(Ge.a,null)}:!1}),t.material_type==="link"&&a.a.createElement(I.a,{style:{cursor:"pointer"},onClick:function(){window.open(t.link)},src:ne(t),fallback:te.a,preview:!1}),["video","pdf","ppt","excel","word"].includes(t.material_type)&&a.a.createElement(I.a,{style:{cursor:"pointer"},onClick:function(){window.open(t.url)},src:ne(t),fallback:te.a,preview:!1})),a.a.createElement("div",{className:g.a.rightPart},a.a.createElement("div",{className:g.a.title},t.title),a.a.createElement("div",{className:g.a.desc},t.digest),a.a.createElement("div",{className:g.a.tagList},t==null||(E=t.tags)===null||E===void 0?void 0:E.map(function(d){return a.a.createElement("span",{key:d.id,className:g.a.tag},d.name)})))))}))))},x=we,Qe=function(){var n=Object(l.useState)(!1),m=Object(o.a)(n,2),r=m[0],f=m[1],D=Object(l.useState)([]),R=Object(o.a)(D,2),b=R[0],h=R[1],N=Object(l.useState)(""),q=Object(o.a)(N,2),Y=q[0],P=q[1],re=Object(l.useState)(""),ee=Object(o.a)(re,2),Z=ee[0],$=ee[1],le=Object(l.useState)([]),ae=Object(o.a)(le,2),B=ae[0],M=ae[1],w=Object(l.useState)([]),t=Object(o.a)(w,2),E=t[0],d=t[1];return Object(l.useEffect)(function(){f(!0),O({page_size:5e3}).then(function(S){if(f(!1),S.code!==0){A.default.error("\u83B7\u53D6\u7D20\u6750\u6807\u7B7E\u5217\u8868\u5931\u8D25");return}M(S.data.items||[])})},[]),Object(l.useEffect)(function(){f(!0),H({page_size:5e3,title:Y,material_type:Z,material_tag_list:E.map(function(S){return S.id})}).then(function(S){if(f(!1),S.code!==0){A.default.error("\u83B7\u53D6\u7D20\u6750\u5217\u8868\u5931\u8D25");return}h(S.data.items||[])})},[Y,Z,E]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:z.a.materialLibraryContainer},a.a.createElement(C.a,{tabs:{type:"line",onChange:function(K){$(K==="all"?"":K)}}},a.a.createElement(C.a.TabPane,{key:"all",tab:"\u5168\u90E8"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"all",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"link",tab:"\u94FE\u63A5"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"link",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"pdf",tab:"PDF"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"pdf",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"video",tab:"\u89C6\u9891"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"video",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"poster",tab:"\u6D77\u62A5"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"poster",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"ppt",tab:"PPT"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"ppt",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"excel",tab:"\u8868\u683C"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"excel",loading:r,setKeyword:P,items:b})),a.a.createElement(C.a.TabPane,{key:"word",tab:"\u6587\u6863"},a.a.createElement(x,{allTags:B,setSelectedTags:d,type:"word",loading:r,setKeyword:P,items:b}))),a.a.createElement("div",{style:{height:36}})),a.a.createElement(V.a,{links:[{title:"\u8BDD\u672F",url:"/staff-frontend/script-library",icon:"icon-message-success"},{title:"\u7D20\u6750",url:"/staff-frontend/material-library",icon:"icon-sucai-outline"},{title:"\u96F7\u8FBE",url:"/staff-frontend/radar",icon:"icon-leida",disabled:!0}]}))},Ze=v.default=Qe},LKIn:function(s,v,e){"use strict";var _=e("14J3"),A=e("BMrR"),o=e("jCWc"),l=e("kPKH"),a=e("/zsF"),C=e("PArb"),V=e("+L6B"),k=e("2/Rp"),z=e("q1tI"),y=e.n(z),G=e("WGvH"),p=e.n(G),U=e("R+Pm"),F=e("8ub7"),H=e("ShgS"),u=e("c+yx"),O=e("9kvl"),L=Object(U.a)({scriptUrl:H.a.iconfontUrl}),i=function(T){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"icon-";if(typeof T=="string"&&T!==""){if(Object(u.e)(T)||Object(u.d)(T))return y.a.createElement(F.a,{component:function(){return y.a.createElement("img",{src:T,alt:"icon",className:"ant-pro-sider-menu-icon"})}});if(T.startsWith(J))return y.a.createElement(L,{type:T})}return T},I=function(T){var J=T.links;return y.a.createElement("div",{className:p.a.bottomNavbar},y.a.createElement(A.a,{className:p.a.navList},J.map(function(j,se){var W=window.location.href.includes(j.url),oe=j.url+j.title,Q=Math.floor(24/J.length);return y.a.createElement(l.a,{key:oe,className:p.a.navItem,span:Q},y.a.createElement(k.a,{type:"link",onClick:function(){W||O.b.push(j.url)},icon:i(j.icon),block:!0,disabled:j.disabled||!1,className:(j.disabled?"disabled":"")+(W?" active":"")},j.title),se<J.length-1&&y.a.createElement(C.a,{type:"vertical"}))})))};v.a=I},"N+uz":function(s,v,e){"use strict";e.d(v,"b",function(){return y}),e.d(v,"a",function(){return p}),e.d(v,"c",function(){return F});var _=e("9og8"),A=e("WmNS"),o=e.n(A),l=e("sy1d"),a=e("RICU");function C(u){return V.apply(this,arguments)}function V(){return V=Object(_.a)(o.a.mark(function u(O){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(l.a)("".concat(a.c,"/common/action/parse-link"),{method:"POST",data:{url:O}}));case 1:case"end":return i.stop()}},u)})),V.apply(this,arguments)}function k(u){return z.apply(this,arguments)}function z(){return z=Object(_.a)(o.a.mark(function u(O){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(l.a)("".concat(a.c,"/common/action/get-signed-url"),{method:"POST",data:{file_name:O}}));case 1:case"end":return i.stop()}},u)})),z.apply(this,arguments)}function y(u){return G.apply(this,arguments)}function G(){return G=Object(_.a)(o.a.mark(function u(O){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(l.a)("".concat(a.c,"/action/get-js-config"),{method:"POST",data:{url:O}}));case 1:case"end":return i.stop()}},u)})),G.apply(this,arguments)}function p(u){return U.apply(this,arguments)}function U(){return U=Object(_.a)(o.a.mark(function u(O){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(l.a)("".concat(a.c,"/action/get-js-agent-config"),{method:"POST",data:{url:O}}));case 1:case"end":return i.stop()}},u)})),U.apply(this,arguments)}function F(u,O){return H.apply(this,arguments)}function H(){return H=Object(_.a)(o.a.mark(function u(O,L){return o.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(l.a)("".concat(a.c,"/action/upload-media"),{method:"POST",data:{type:O,url:L}}));case 1:case"end":return I.stop()}},u)})),H.apply(this,arguments)}},Ti4W:function(s,v,e){s.exports={materialLibraryContainer:"materialLibraryContainer___2NgkA"}},WGvH:function(s,v,e){s.exports={bottomNavbar:"bottomNavbar___myDVR",navList:"navList___1hpLu",navItem:"navItem___1cfH_"}},dGsC:function(s,v,e){s.exports=e.p+"static/file-icon-excel.f80e8a36.svg"},qX41:function(s,v,e){s.exports=e.p+"static/file-icon-ppt.beb19054.svg"},r11K:function(s,v,e){s.exports=e.p+"static/file-icon-image.f612c529.svg"},vXzg:function(s,v,e){s.exports=e.p+"static/file-icon-word.897db471.svg"},zsUx:function(s,v,e){s.exports={materialList:"materialList___2bvtw",materialItem:"materialItem___39l_R",sendButtonWrap:"sendButtonWrap___27A8R",sendButton:"sendButton___wj-sa",materialPreview:"materialPreview___1kyp5",leftPart:"leftPart___zH0aI",rightPart:"rightPart___z0gMC",title:"title___3WA31",desc:"desc___3YM9O",tagList:"tagList___1Hffh",tag:"tag___3a5Ib",overlay:"overlay___1u1nk",overlayTitle:"overlayTitle___CpSM2",buttonBox:"buttonBox___320My",filterBar:"filterBar___D_0To",searchBar:"searchBar___2b0ir"}}}]);
